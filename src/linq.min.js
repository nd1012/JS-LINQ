/**
 * An array with LINQ-like methods
 * 
 * @github https://github.com/nd1012/JS-LINQ
 * @license MIT
 * @copyright (c)2022 Andreas Zimmermann, wan24.de
 */class LinqArray extends Array{static#VERSION=0;static#Helper={IsLinqArray:a=>a instanceof LinqArray,EnsureLinqArray:(a,b=!1)=>a instanceof LinqArray?a:new LinqArray().SetAllData(a,b),EnsureFinalArray:a=>a instanceof LinqArray?a.EnsureGenerated():a,GetArrayLength:a=>a instanceof LinqArray?a.EnsureGenerated()._Iterable.length:a.length,IsUndefined:a=>"undefined"==typeof a,IsFunction:a=>"function"==typeof a,IsString:a=>"string"==typeof a,DefaultOrdering:(c,a,b=!1)=>{switch(!0){case"string"==typeof c:const d=c.localeCompare(a?.toString());switch(!0){case 0>d:return b?1:-1;case 0<d:return b?-1:1;default:return 0;}case c<a:return b?1:-1;case c>a:return b?-1:1;default:return 0;}},DefaultComparing:(c,a,b=!1)=>b?c===a:0==LinqArray.Helper.DefaultOrdering(c,a),EnsureValueGetter:a=>"function"==typeof a?a:b=>b[a]};#OrderAction=null;#Ordering=null;#OrderDescending=null;#GroupKey=void 0;#Generator=null;#IsGenerated=!0;#EstimatedCount=null;#Store=!0;#PassStore=!1;#Extended=null;static get VERSION(){return LinqArray.#VERSION}static get Helper(){return LinqArray.#Helper}get GroupKey(){return this.#GroupKey}get IsGenerated(){return this.#IsGenerated}get Store(){return this.#Store}get Extended(){return this.#Extended}get _Iterable(){return this.#Extended??this}Count(a=null){if(!a){if(null!=this.#EstimatedCount)return this.#EstimatedCount;if(this.#Extended)return this.#Extended.length;if(this.#IsGenerated)return this.length}else if(this.#Extended)return this.Where(a).Count();return this.filter(b=>a(b)).length}IsEmpty(){return this._GetIterator().next().done}Contains(a,b=null){return b?this.Any(c=>b(a,c)):this.#Extended?this.Any(b=>a==b):this.includes(a)}Join(c,d,e,f,g=null){const h=this;return d=LinqArray.Helper.EnsureValueGetter(d),e=LinqArray.Helper.EnsureValueGetter(e),this._CreateGenerated(function*(){let i,j,k;for(j of h._Iterable){i=d(j);for(k of c)(g?!!g(i,e(k)):i==e(k))&&(yield f(j,k))}}())}GroupJoin(c,d,e,f,g=null){const h=this;return d=LinqArray.Helper.EnsureValueGetter(d),e=LinqArray.Helper.EnsureValueGetter(e),c=LinqArray.Helper.EnsureLinqArray(c,!0),this._CreateGenerated(function*(){let i,j,k,l;for(k of h._Iterable){i=d(k),j=c.Where(a=>g?g(i,e(a)):i==e(a));for(l of c)yield f(k,j,i)}}())}Where(a){const b=this;return this._CreateGenerated(function*(){let c,d=0;for(c of b._Iterable)a(c,d)&&(yield c),d++}())}All(a){let b;for(b of this.Execute(a))if(!b)return!1;return!0}Any(a=null){if(!a)return!this.IsEmpty();let b;for(b of this.Execute(a))if(b)return!0}Distinct(a=null){const b=this;return this._CreateGenerated(function*(){const c=a?new LinqArray:[];let d;for(d of b._Iterable)(a?!c.Contains(d,a):!c.includes(d))&&(yield d,c.push(d))}())}DistinctBy(a,b=null){const c=this;return this._CreateGenerated(function*(){const d=b?new LinqArray:[];a=LinqArray.Helper.EnsureValueGetter(a);let e,f;for(f of c._Iterable)e=a(f),(b?!d.Contains(e,b):!d.includes(e))&&(yield f,d.push(e))}())}Union(a,b=null,c=!1){const d=c?this.EnsureGenerated():this.EnsureGenerated().slice(),e=this._CreateInstance(this);return d.#IsGenerated=!1,d.#Generator=function*(){let c;for(c of a)e.Contains(c,b)||(yield c,e.push(c))}(),d.#EstimatedCount=null,d}UnionBy(a,b,c=null,d=!1){b=LinqArray.Helper.EnsureValueGetter(b);const e=d?this.EnsureGenerated():this.EnsureGenerated().slice(),f=this;return e.#IsGenerated=!1,e.#Generator=function*(){const d=f.Select(b);let e,g;for(g of a)e=b(g),d.Contains(e,c)||(yield g,d.push(e))}(),e.#EstimatedCount=null,e}Select(a){const b=this;return a=LinqArray.Helper.EnsureValueGetter(a),this._CreateGenerated(function*(){let c,d=0;for(c of b._Iterable)yield a(c,d),d++}(),this.TryGetNonEnumeratedCount())}SelectMany(a,b=null){const c=this;return this._CreateGenerated(function*(){let d,e,f,g=0;a=LinqArray.Helper.EnsureValueGetter(a);for(d of c._Iterable){if(b)for(e of a(d,g))for(f of e)yield b(f,e);else for(f of a(d,g))yield f;g++}}())}Zip(a,b=null){var c=Math.min;const d=this,e=LinqArray.Helper.IsFunction(b),f=!e&&null!=b,g=LinqArray.Helper.GetArrayLength(a),h=f?LinqArray.Helper.GetArrayLength(b):null;this.EnsureGenerated(null==h?g:c(g,h));const j=f?c(this._Iterable.length,g,h):c(this._Iterable.length,g);return this._CreateGenerated(function*(){for(let c=0;c<j;c++)f?yield[d[c],a[c],b[c]]:e?yield b(d[c],a[c]):yield[d[c],a[c]]}(),j)}OfType(a){const b=this;return this._CreateGenerated(function*(){let c;for(c of b._Iterable)typeof c==a&&(yield c)}())}Except(a,c=null){const d=this;return this._CreateGenerated(function*(){const b=LinqArray.Helper.IsLinqArray(a);let e;for(e of d._Iterable)(c?b?!a.Any(a=>c(e,a)):!a.some(a=>c(e,a)):b?!a.Contains(e):!a.includes(e))&&(yield e)}())}ExceptBy(a,c,d=null){const e=this;return this._CreateGenerated(function*(){const b=LinqArray.Helper.IsLinqArray(a);c=LinqArray.Helper.EnsureValueGetter(c);let f,g;for(g of e._Iterable)f=c(g),(d?b?!a.Any(a=>d(f,c(a))):!a.some(a=>d(f,c(a))):b?!a.Any(a=>f==c(a)):!a.some(a=>f==c(a)))&&(yield g)}())}Intersect(c,d=null){const e=this;return this._CreateGenerated(function*(){d&&(c=LinqArray.Helper.EnsureLinqArray(c));const f=e.TryGetNonEnumeratedCount(),g=LinqArray.Helper.GetArrayLength(c),h=null!=f&&null!=g&&f<g?e:c,a=h==e?c:e,b=LinqArray.Helper.IsLinqArray(a);let i;for(i of h)(b?a.Any(a=>d(i,a)):a.includes(i))&&(yield i)}())}IntersectBy(c,d,e=null){const f=this;return this._CreateGenerated(function*(){const g=f.TryGetNonEnumeratedCount();let h,i;if(d=LinqArray.Helper.EnsureValueGetter(d),LinqArray.Helper.IsLinqArray(c)){const j=c.TryGetNonEnumeratedCount(),k=null!=g&&null!=j&&g<j?f:c,a=k==f?c:f;for(i of k)h=d(i),(e?a.Any(a=>e(h,d(a))):a.Any(a=>h==d(a)))&&(yield i)}else{const j=LinqArray.Helper.IsLinqArray(c)?c.TryGetNonEnumeratedCount():c.length,k=null!=g&&null!=j&&g<j?f:c,a=k==f?c:f,b=LinqArray.Helper.IsLinqArray(a);for(i of k)h=d(i),(e?b?a.Any(a=>e(h,d(a))):a.some(a=>e(h,d(a))):b?a.Any(a=>h==d(a)):a.some(a=>h==d(a)))&&(yield i)}}())}First(a=null){if(!a){const a=this._GetIterator().next();if(a.done)throw new RangeError("No item");return a.value}let b;for(b of this._Iterable)if(a(b))return b;throw new RangeError("No item")}FirstOrDefault(a,b=null){if([a,b]=this.#EnsureActionOrDefaultResult(a,b),!a){const a=this._GetIterator().next();return a.done?b:a.value}let c;for(c of this._Iterable)if(a(c))return c;return b}Last(a=null){if(!a){const a=this.EnsureGenerated()._Iterable.length;if(!a)throw new RangeError("No item");return this._Iterable[a-1]}let b;for(b of this.EnsureGenerated().slice().reverse())if(a(b))return b;throw new RangeError("No item")}LastOrDefault(a,b=null){if([a,b]=this.#EnsureActionOrDefaultResult(a,b),!a)return this.EnsureGenerated()._Iterable.length?this._Iterable[this._Iterable.length-1]:b;let c;for(c of this.EnsureGenerated().slice().reverse())if(a(c))return c;return b}Single(a=null){if(!a)switch(this.EnsureGenerated(2)._Iterable.length){case 0:throw new RangeError("No item");case 1:return this._Iterable[0];default:throw new RangeError("Many items");}let b,c=!1;if(this.ForEach(d=>{if(a(d)){if(c)throw new RangeError("Many items");b=d,c=!0}}),!c)throw new RangeError("No item");return b}SingleOrDefault(a,b=null){[a,b]=this.#EnsureActionOrDefaultResult(a,b);let c=!1;return this.ForEach(d=>{if(!a||a(d)){if(c)throw new RangeError("Many items");b=d,c=!0}}),b}ElementAt(a){if(0>a&&(a=this.Count()-a),this.EnsureGenerated(a+1),0>a||a>=this._Iterable.length)throw new RangeError("Invalid index");return this._Iterable[a]}ElementAtOrDefault(a,b=null){return 0>a&&(a=this.Count()-a),this.EnsureGenerated(a+1),0>a||a>=this._Iterable.length?b:this._Iterable[a]}DefaultIfEmpty(a){return this._GetIterator().next().done?this._CreateInstance([a]):this}OrderBy(a=null,b=null,c=!1){return this.#_OrderBy(a,b,c,!1)}OrderByDescending(a=null,b=null,c=!1){return this.#_OrderBy(a,b,c,!0)}#_OrderBy(c,d,e,f){null!=c&&(c=LinqArray.Helper.EnsureValueGetter(c)),d??=LinqArray.Helper.DefaultOrdering;const g=e?this.EnsureGenerated():this.EnsureGenerated().slice();return g.#OrderAction=c,g.#Ordering=d,g.#OrderDescending=f,g.sort(c?(e,a)=>d(c(e),c(a),f,e,a):(c,a)=>d(c,a,f,c,a))}ThenBy(a,b=null){return this.#_ThenBy(a,b,!1)}ThenByDescending(a,b=null){return this.#_ThenBy(a,b,!0)}#_ThenBy(a,c,d){if(null==this.#Ordering)return this.#_OrderBy(a,c,!1,d);const e=this,f=(d,a,b,f,g)=>{const h=e.#OrderAction?e.#Ordering(e.#OrderAction(f),e.#OrderAction(g),e.#OrderDescending,f,g):e.#Ordering(f,g,e.#OrderDescending,f,g);return 0==h?c(d,a,b,f,g):h};return a=LinqArray.Helper.EnsureValueGetter(a),c??=LinqArray.Helper.DefaultOrdering,this.#_OrderBy(a,f,!1,d)}GroupBy(a=null,b=null){const c=new Map;let d,f;return null!=a&&(a=LinqArray.Helper.EnsureValueGetter(a)),this.ForEach(e=>{d=a?a(e):e,c.has(d)?c.get(d).push(b?b(e):e):(c.set(d,f=new this.constructor().AppendThis(b?b(e):e)),f.#GroupKey=d)}),new this.constructor().AppendThis(...c.values())}TryGetNonEnumeratedCount(){return this.#IsGenerated?this._Iterable.length:this.#EstimatedCount}Skip(a=1){if(0>a)return this.SkipLast(+a);if(1>a)return this.ToLinqArray();const b=this;return this._CreateGenerated(function*(){const c=b._GetIterator();let d;for(;a&&!(d=c.next()).done;a--);d.done||(yield*c)}())}SkipLast(a=1){if(!a)return this.ToLinqArray();const b=this.EnsureGenerated();return a=this._Iterable.length-a?this._CreateGenerated(function*(){const c=b._GetIterator();for(let b;a&&!(b=c.next()).done;a--)yield b.value}(),Math.max(0,this._Iterable.length-a)):this._CreateInstance()}SkipWhile(a){return this._CreateGenerated(this.GetWhenNot(a))}*GetWhenNot(a){const b=this._GetIterator();let c;for(c=b.next();!c.done&&a(c.value);c=b.next());c.done||(yield c,yield*b)}Take(a){if(0>a)return this.TakeLast(+a);if(1>a)return this._CreateInstance();const b=this,c=this.TryGetNonEnumeratedCount();return this._CreateGenerated(function*(){const c=b._GetIterator();for(let b;a&&!(b=c.next()).done;a--)yield b}(),null==c?null:Math.max(0,Math.min(c,a)))}TakeLast(a){if(!a)return this._CreateInstance();const b=this.EnsureGenerated()._Iterable.length;switch(!0){case!b:return this._CreateInstance();case b<a:return this.ToLinqArray();default:return this.Skip(b-a);}}TakeWhile(a){return this._CreateGenerated(this.GetWhile(a))}*GetWhile(a){const b=this._GetIterator();for(let c=b.next();!c.done&&a(c.value);c=b.next())yield c.value}Append(...a){return this.AppendAll(a)}AppendAll(a){const b=this,c=!LinqArray.Helper.IsLinqArray(a)||a.IsGenerated,d=c?this.TryGetNonEnumeratedCount():null;return!c||a.length?this._CreateGenerated(function*(){let c;for(c of b._Iterable)yield c;yield*a[Symbol.iterator]()}(),null==d?null:d+a.length):this.ToLinqArray()}AppendThis(...a){return this.AppendAllThis(a)}AppendAllThis(a){const b=!LinqArray.Helper.IsLinqArray(a)||a.IsGenerated;return b&&!a.length?this:(this.EnsureGenerated().#IsGenerated=!1,this.#Generator=function*(){yield*a[Symbol.iterator]()}(),this.#EstimatedCount=b?this._Iterable.length+a.length:null,this)}Prepend(...a){return this.PrependAll(a)}PrependAll(a){const b=this,c=!LinqArray.Helper.IsLinqArray(a)||a.IsGenerated,d=c?this.TryGetNonEnumeratedCount():null;return!c||a.length?this._CreateGenerated(function*(){let c;for(c of a)yield c;yield*b._GetIterator()}(),null==d?null:d+a.length):this.ToLinqArray()}PrependThis(...a){return this.PrependAllThis(a)}PrependAllThis(a){const b=LinqArray.Helper.GetArrayLength(a);return b?(this.unshift(...a),this.#IsGenerated||null==this.#EstimatedCount||(this.#EstimatedCount+=b),this):this}Concat(...a){return this.ConcatAll(a)}ConcatAll(a){const b=this,c=this._CreateGenerated(function*(){let d,e;for(d of b._Iterable)yield d;a.some(a=>LinqArray.Helper.IsLinqArray(a)&&!a.IsGenerated)||(c.#EstimatedCount=c.length+a.map(a=>a.length).reduce((a,b)=>a+b,0));for(e of a)for(d of e)yield d}());return c}ConcatThis(...a){return this.ConcatAllThis(a)}ConcatAllThis(a){return this.EnsureGenerated().#IsGenerated=!1,this.#Generator=function*(){let b,c;for(b of a)for(c of b)yield c}(),this.#EstimatedCount=a.some(a=>LinqArray.Helper.IsLinqArray(a)&&!a.IsGenerated)?null:this._Iterable.length+a.map(a=>a.length).reduce((a,b)=>a+b,0),this}Chunk(a){const b=this,c=this.TryGetNonEnumeratedCount();return this._CreateGenerated(function*(){const c=b._GetIterator();for(let d,e={done:!1};!e.done;){for(d=[];d.length<a&&!(e=c.next()).done;d.push(e.value));d.length&&(yield b._CreateInstance(d))}}(),null==c?null:Math.ceil(c/a))}Reverse(a=!1){return a?this.reverse():this.EnsureGenerated().slice().reverse()}Max(a=null){switch(this.EnsureGenerated()._Iterable.length){case 0:throw new RangeError("No items");case 1:return this.First();default:return Math.max(...(null==a?this:this.Select(a)));}}MaxBy(a){var b=Number.MAX_VALUE;switch(this.EnsureGenerated()._Iterable.length){case 0:throw new RangeError("No items");case 1:return this.First();}let c,d,e,f=null;a=LinqArray.Helper.EnsureValueGetter(a);for(e of this._Iterable){if(d=a(e),d==b)return e;null!=f&&d<=f||(f=d,c=e)}return c}Min(a=null){switch(this.EnsureGenerated()._Iterable.length){case 0:throw new RangeError("No items");case 1:return this.First();default:return Math.min(...(null==a?this:this.Select(a)));}}MinBy(a){var b=Number.MIN_VALUE;switch(this.EnsureGenerated()._Iterable.length){case 0:throw new RangeError("No items");case 1:return this.First();}let c,d,e,f=null;a=LinqArray.Helper.EnsureValueGetter(a);for(e of this._Iterable){if(d=a(e),d==b)return e;null!=f&&d>=f||(f=d,c=e)}return c}Sum(a=null){return(null==a?this:this.Select(a)).EnsureGenerated().reduce((a,b)=>a+b,0)}Average(a=null){const b=this.Sum(a),c=this._Iterable.length;return c?b/c:0}SequenceEqual(a,b=null,c=!1){const d=this.EnsureGenerated()._Iterable.length;if(d!=LinqArray.Helper.GetArrayLength(a))return!1;if(!d)return!0;b||(b=(d,a)=>!c&&d==a||c&&d===a),a=LinqArray.Helper.EnsureFinalArray(a);for(let e=0;e<d;e++)if(!b(this._Iterable[e],a[e],c))return!1;return!0}Aggregate(a,b=void 0,c=null){const d=this.EnsureGenerated()._Iterable.length;if(!d)return c?c(b):b;if(LinqArray.Helper.IsUndefined(b)){if(1==d)return c?c(this._Iterable[0]):this._Iterable[0];let e=!0;this.ForEach(c=>{e?(b=c,e=!1):b=a(b,c)})}else this.ForEach(c=>b=a(b,c));return c?c(b):b}*Execute(a){let b;for(b of this._Iterable)yield a(b)}async*ExecuteAsync(a){let b;for(b of this._Iterable)yield await a(b)}ForEach(a,b=!0){const c=this;if(b){let b,c=0;for(b of this._Iterable){if(!1===a(b,c))break;c++}}return b?this:this._CreateGenerated(function*(){let b,d=0;for(b of c._Iterable){if(!1===a(b,d))break;yield b,d++}}())}async ForEachAsync(a){let b,c=0;for(b of this._Iterable){if(!1===(await a(b,c)))break;c++}return this}ToArray(a=null,b=!1){if(!b)return null==a?[...this]:this.Take(a).ToArray();if(null!=a)return this.Take(a).ToArray(null,!0);const c=[...this],d=c.length;let e,f;for(let g=0;g<d;g++)if(LinqArray.Helper.IsLinqArray(c[g]))c[g]=c[g].ToArray(null,!0);else if("object"==typeof c[g])for([e,f]of Object.entries(c[g]))LinqArray.Helper.IsLinqArray(f)&&(c[g][e]=c[g][e].ToArray(null,!0));return c}ToList(a=null){return this.ToArray(a)}ToDictionary(a,b=null){const c=this;return a=LinqArray.Helper.EnsureValueGetter(a),new Map(function*(){let d,e;for(e of c._Iterable)d=a(e),yield[d,b?b(e,d):e]}())}ToHashSet(a=null){const b=this;null!=a&&(a=LinqArray.Helper.EnsureValueGetter(a));const c=new Set(a?function*(){let d;for(d of b._Iterable)yield a?a(d,c):d}():this);return c}ToLookup(a,b=null){const c=new Map;let d,e;return null!=a&&(a=LinqArray.Helper.EnsureValueGetter(a)),this.ForEach(f=>{d=a?a(f):f,e=b?b(f):f,c.has(d)?c.get(d).push(e):c.set(d,[e])}),c}ToLinqArray(a=null){return null==a?this._CreateInstance(this):this.Take(a)}EnsureGenerated(a=null){if(this.#Extended||this.#IsGenerated||!this.#Generator||a&&this.length>=a)return this;if(!this.#Store)throw new TypeError("Storing was disabled");const b=this.#Generator;let c=null;for(let d=a??0;(!a||d)&&!(c=b.next()).done;this.push(c.value),d--);return!c?.done&&1?this:(this.#Generator=null,this.#IsGenerated=!0,this.#EstimatedCount=null,this)}Finalize(){if(this.#IsGenerated||!this.#Generator)return this;if(this.#Store)return this.EnsureGenerated();for(let a=this.#Generator;!a.next().done;);return this.#Generator=null,this.#IsGenerated=!0,this.#EstimatedCount=null,this}SetData(...a){return this.SetAllData(a)}SetAllData(a,b=!1){return this.Clear(),b?(this.#IsGenerated=!1,this.#EstimatedCount=LinqArray.Helper.IsLinqArray(a)?a.TryGetNonEnumeratedCount():a.length,this.#Generator=function*(){yield*a[Symbol.iterator]()}()):this.push(...a),this}Clear(){return!this.#Extended&&this.length&&(this.length=0),this.#OrderAction=null,this.#Ordering=null,this.#OrderDescending=null,this.#GroupKey=void 0,this.#IsGenerated=!0,this.#EstimatedCount=null,this.#Generator=null,this.#Store=!this.#Extended,this}DisableStore(a=!1){if(!this.#Store)throw new TypeError("Storing is disabled already");if(this.length)throw new TypeError("Stored already");return this.#Store=!1,this.#PassStore=a,this}Generate(a,b=null){return this.Clear().#IsGenerated=!1,this.#Generator=a,this.#EstimatedCount=b,this}_CreateInstance(a=null){const b=new this.constructor;return this.#PassStore&&(b.#Store=this.#Store,b.#PassStore=!0),a&&b.SetAllData(a,!0),b}_CreateGenerated(a,b=null){const c=this._CreateInstance();return c.#IsGenerated=!1,c.#Generator=a,c.#EstimatedCount=b,c}_GetIterator(){return this._Iterable[Symbol.iterator]()}#EnsureActionOrDefaultResult(a,b){if(LinqArray.Helper.IsUndefined(a))throw new TypeError("Action or default result required");return LinqArray.Helper.IsFunction(a)||(b=a,a=null),[a,b]}*[Symbol.iterator](){if(this.#Extended)yield*this.#Extended[Symbol.iterator];else{const a=this.#Generator,b=super[Symbol.iterator]();if(!a){if(!this.#Store)throw new TypeError("Iterated already - buffer is disabled");yield*b}else if(a){if(b)for(let a=b.next();!a.done;a=b.next())yield a.value;for(let b=a.next();!b.done;b=a.next())this.#Store&&this.push(b.value),yield b.value;this.#Generator=null,this.#IsGenerated=!0,this.#EstimatedCount=null}}}constructor(a=null,b=!0,c=!1){if(super(),b||this.DisableStore(c),!!a){const b=LinqArray.Helper.IsLinqArray(a),c=b?a.TryGetNonEnumeratedCount():a.length;(b||c)&&(this.#IsGenerated=!1,this.#Generator=function*(){yield*a[Symbol.iterator]()}(),this.#EstimatedCount=c)}}static From(a,b=!0,c=!1){return new this(a,b,c)}static Range(a,b,c=!0,d=!1){const e=new this(null,c,d);return e.#IsGenerated=!1,e.#Generator=function*(){if(a<b)for(let c=a;c<b;c++)yield c;else for(let c=a;c>b;c--)yield c}(),e.#EstimatedCount=a<b?b-a:a-b,e}static Empty(a=!0,b=!1){return new this(null,a,b)}static Repeat(a,b,c=!0,d=!1){const e=new this(null,c,d);return e.#IsGenerated=!1,e.#Generator=function*(){for(let c=0;c<b;c++)yield a}(),e.#EstimatedCount=b,e}static ExtendArray(){if(!LinqArray.Helper.IsUndefined(Array.prototype.ToLinqArray))return;const a=this;Array.prototype.ToLinqArray=(b=null)=>null==b?new a(this):new a().SetAllData(this,!0).Take(b)}static ExtendObject(a){const b=new this(a,!1),c=new Map(Object.entries(a));let d,e;b.#Extended=a;for([d,e]of Object.entries(b))/^[_|\#|a-z]/.test(d)||!LinqArray.Helper.IsFunction(e)||e instanceof AsyncFunction||e instanceof GeneratorFunction||c.kas(d)||!(e.prototype instanceof LinqArray)||(a[d]=(...a)=>b[d](...a));return b}}window&&LinqArray.Helper.IsUndefined(window.From)&&(window.From=(a,b=!0,c=!1)=>LinqArray.From(a,b,c));